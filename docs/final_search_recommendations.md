# –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–∏—Å–∫–∞

## üìä –ê–Ω–∞–ª–∏–∑ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –û–±—ä—ë–º –¥–∞–Ω–Ω—ã—Ö
- **IT Autonomos**: 18,852 —Å–æ–æ–±—â–µ–Ω–∏—è ‚Üí 6,195 —Ç—Ä–µ–¥–æ–≤
- **Digital Nomad Spain**: 165,004 —Å–æ–æ–±—â–µ–Ω–∏—è ‚Üí 69,719 —Ç—Ä–µ–¥–æ–≤
- **–ò—Ç–æ–≥–æ**: 183,856 —Å–æ–æ–±—â–µ–Ω–∏–π ‚Üí 75,914 —Ç—Ä–µ–¥–æ–≤

### –ö–ª—é—á–µ–≤—ã–µ –∏–Ω—Å–∞–π—Ç—ã

#### 1. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –¥–ª–∏–Ω–µ —Ç—Ä–µ–¥–æ–≤
- **62% –æ–¥–∏–Ω–æ—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π** (–≤ Nomads –≥—Ä—É–ø–ø–µ)
- **47% –æ–¥–∏–Ω–æ—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π** (–≤ IT Autonomos)
- –°—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞: 2.4-3.0 —Å–æ–æ–±—â–µ–Ω–∏—è
- –î–ª–∏–Ω–Ω—ã–µ —Ç—Ä–µ–¥—ã (>10 —Å–æ–æ–±—â–µ–Ω–∏–π) —Å–æ–¥–µ—Ä–∂–∞—Ç –±–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

#### 2. –¢–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ

**IT Autonomos (–±–æ–ª–µ–µ –Ω–∞–ª–æ–≥–æ–≤–∞—è —Ç–µ–º–∞—Ç–∏–∫–∞):**
- **Tax**: 382 —Ç—Ä–µ–¥–∞ (6.2%)
- **Business**: 302 —Ç—Ä–µ–¥–∞ (4.9%)
- **Visa**: 109 —Ç—Ä–µ–¥–æ–≤ (1.8%)

**Digital Nomad Spain (–±–æ–ª–µ–µ –≤–∏–∑–æ–≤–∞—è —Ç–µ–º–∞—Ç–∏–∫–∞):**
- **Visa**: 273 —Ç—Ä–µ–¥–∞ (0.4%)
- **Business**: 173 —Ç—Ä–µ–¥–∞ (0.2%)
- **Tax**: 135 —Ç—Ä–µ–¥–æ–≤ (0.2%)

#### 3. –¢–æ–ø –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤

**IT Autonomos:**
1. –Ω–∞–ª–æ–≥ (207)
2. –±–∞–Ω–∫ (161)
3. —Å—á–µ—Ç (119)
4. –∞–≤—Ç–æ–Ω–æ–º–æ (97)
5. ss (71)

**Digital Nomad Spain:**
1. –≤–Ω–∂ (132)
2. –Ω–æ–º–∞–¥ (122)
3. –Ω–∞–ª–æ–≥ (118)
4. –±–∞–Ω–∫ (62)
5. —Å—á–µ—Ç (54)

## üéØ –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–∏—Å–∫–∞

### 1. –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

#### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–∫–∞—á–µ—Å—Ç–≤–æ 4.0+):
- –î–ª–∏–Ω–Ω—ã–µ —Ç—Ä–µ–¥—ã (>10 —Å–æ–æ–±—â–µ–Ω–∏–π)
- –¢—Ä–µ–¥—ã —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Ç–µ–º–∞–º–∏ (tax + visa + business)
- –ù–µ–¥–∞–≤–Ω–∏–µ —Ç—Ä–µ–¥—ã (<30 –¥–Ω–µ–π)
- –¢—Ä–µ–¥—ã —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏ –∏ –æ—Ç–≤–µ—Ç–∞–º–∏

#### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–∫–∞—á–µ—Å—Ç–≤–æ 2.0-4.0):
- –°—Ä–µ–¥–Ω–∏–µ —Ç—Ä–µ–¥—ã (2-5 —Å–æ–æ–±—â–µ–Ω–∏–π)
- –¢—Ä–µ–¥—ã —Å –æ–¥–Ω–æ–π —Ç–µ–º–∞—Ç–∏–∫–æ–π
- –¢—Ä–µ–¥—ã —Å –∫–ª—é—á–µ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏

#### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–∫–∞—á–µ—Å—Ç–≤–æ <2.0):
- –û–¥–∏–Ω–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –°—Ç–∞—Ä—ã–µ —Ç—Ä–µ–¥—ã (>90 –¥–Ω–µ–π)
- –¢—Ä–µ–¥—ã –±–µ–∑ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤

### 2. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Elasticsearch

```json
{
  "mappings": {
    "properties": {
      // –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
      "thread_id": {"type": "keyword"},
      "group_name": {"type": "keyword"},
      "group_type": {"type": "keyword"},
      
      // –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
      "first_message_date": {"type": "date"},
      "last_updated": {"type": "date"},
      "year": {"type": "integer"},
      "quarter": {"type": "keyword"},
      
      // –ö–æ–Ω—Ç–µ–Ω—Ç
      "content": {"type": "text", "analyzer": "standard"},
      "first_message": {"type": "text"},
      "last_message": {"type": "text"},
      
      // –¢–µ–º–∞—Ç–∏–∫–∞
      "topics": {"type": "keyword"},
      "keywords": {"type": "keyword"},
      "tax_related": {"type": "boolean"},
      "visa_related": {"type": "boolean"},
      "business_related": {"type": "boolean"},
      
      // –ö–∞—á–µ—Å—Ç–≤–æ –∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å
      "quality_score": {"type": "float"},
      "relevance_score": {"type": "float"},
      "message_count": {"type": "integer"},
      
      // –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
      "indexed_at": {"type": "date"},
      "source": {"type": "keyword"}
    }
  }
}
```

### 3. –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–∏—Å–∫–∞

#### A. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
```python
# –§–∏–ª—å—Ç—Ä –ø–æ —Ç–µ–º–∞—Ç–∏–∫–µ
if query_contains_tax_terms:
    filters.append({"term": {"tax_related": True}})
if query_contains_visa_terms:
    filters.append({"term": {"visa_related": True}})

# –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—á–µ—Å—Ç–≤—É
filters.append({"range": {"quality_score": {"gte": 2.0}}})
```

#### B. –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫
```python
search_query = {
    "bool": {
        "should": [
            # –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ (–≤–µ—Å 0.7)
            {
                "knn": {
                    "field": "content_embedding",
                    "query_vector": embedding,
                    "k": 20,
                    "boost": 0.7
                }
            },
            # BM25 –ø–æ–∏—Å–∫ (–≤–µ—Å 0.3)
            {
                "multi_match": {
                    "query": query,
                    "fields": ["content^2", "first_message^1.5", "last_message^1.5"],
                    "boost": 0.3
                }
            }
        ],
        "filter": filters
    }
}
```

#### C. –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```python
# –ë–æ–Ω—É—Å –∑–∞ –∫–∞—á–µ—Å—Ç–≤–æ
score += doc['quality_score'] * 0.2

# –ë–æ–Ω—É—Å –∑–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å —Ç–µ–º–∞—Ç–∏–∫–∏
if doc['tax_related'] and query_tax_related:
    score += 0.3
if doc['visa_related'] and query_visa_related:
    score += 0.3

# –ë–æ–Ω—É—Å –∑–∞ –Ω–µ–¥–∞–≤–Ω–æ—Å—Ç—å
days_ago = (now - doc['last_updated']).days
if days_ago < 30:
    score += 0.2
```

## üöÄ –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Elasticsearch** - —Å–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º mapping
2. **–°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏** - `scripts/ingestion/index_telegram_threads.py`
3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å embeddings** - –ø–æ–¥–∫–ª—é—á–∏—Ç—å –º–æ–¥–µ–ª—å –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞

### –≠—Ç–∞–ø 2: –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
1. **–ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å IT Autonomos** - 6,195 —Ç—Ä–µ–¥–æ–≤
2. **–ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å Digital Nomad Spain** - 69,719 —Ç—Ä–µ–¥–æ–≤
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏** - —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–æ–∏—Å–∫–∏

### –≠—Ç–∞–ø 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RAG
1. **–°–æ–∑–¥–∞—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å** - `app/services/search_service.py`
2. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å LLM** - –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —Ç—Ä–µ–¥—ã –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤** - –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å

### –≠—Ç–∞–ø 4: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–µ—Å–∞ –ø–æ–∏—Å–∫–∞** - –±–∞–ª–∞–Ω—Å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏ BM25
2. **–î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã** - –ø–æ –≤—Ä–µ–º–µ–Ω–∏, —Ç–µ–º–∞—Ç–∏–∫–µ, –∫–∞—á–µ—Å—Ç–≤—É
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ö–∞—á–µ—Å—Ç–≤–æ –ø–æ–∏—Å–∫–∞
- **Precision@10**: >80% –¥–ª—è –Ω–∞–ª–æ–≥–æ–≤—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
- **Recall**: >90% –¥–ª—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ç—Ä–µ–¥–æ–≤
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞**: <500ms –¥–ª—è –ø–æ–∏—Å–∫–∞

### –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ–º–∞—Ç–∏–∫
- **–ù–∞–ª–æ–≥–∏**: 517 —Ç—Ä–µ–¥–æ–≤ (0.7% –æ—Ç –æ–±—â–µ–≥–æ)
- **–í–∏–∑—ã**: 382 —Ç—Ä–µ–¥–∞ (0.5% –æ—Ç –æ–±—â–µ–≥–æ)
- **–ë–∏–∑–Ω–µ—Å**: 475 —Ç—Ä–µ–¥–æ–≤ (0.6% –æ—Ç –æ–±—â–µ–≥–æ)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
1. **–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–ª–∏–Ω–Ω—ã–µ —Ç—Ä–µ–¥—ã** - –±–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
2. **–§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ —Ç–µ–º–∞—Ç–∏–∫–µ** - —Ç–æ—á–Ω–µ–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
3. **–£—á–∏—Ç—ã–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ** - –∏—Å–∫–ª—é—á–∞—Ç—å —Å–ø–∞–º
4. **–û–±–Ω–æ–≤–ª—è—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω–æ** - –∞–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

---

*–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ NAIL - Nahornyi AI Lab*

